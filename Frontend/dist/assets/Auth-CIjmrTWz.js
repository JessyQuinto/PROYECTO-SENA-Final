import{j as e}from"./radix-pxeQr2vL.js";import{i as L,b as n}from"./react-9ItUixmA.js";import{u as E,I as s}from"./index-DDd0kLwX.js";import{o as A,s as y}from"./shadcn_misc-DPVfRoQl.js";import"./supabase-D999gSRu.js";const F=A({email:y().email(),password:y().min(6)}),I=()=>{const{signIn:b,signUp:N,user:r,signOut:f}=E(),m=L(),[a,d]=n.useState("login"),[g,v]=n.useState("comprador"),[o,w]=n.useState(""),[l,S]=n.useState(""),[u,i]=n.useState(null),[x,c]=n.useState(null),[p,h]=n.useState(!1),C=async t=>{if(t.preventDefault(),i(null),c(null),!F.safeParse({email:o,password:l}).success){i("Datos inválidos");return}h(!0);const j=a==="login"?await b(o,l):await N(o,l,g);j.error?i(j.error):(c(a==="signup"?"¡Cuenta creada! Revisa tu email para confirmar.":"¡Bienvenido! Redirigiendo..."),setTimeout(()=>{const k=r?.role==="vendedor"?"/vendedor":"/";m(k,{replace:!0})},600)),h(!1)};return r?e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body space-y-3",children:[e.jsxs("p",{className:"text-sm text-gray-700 flex items-center gap-2",children:[e.jsx(s,{category:"Autenticacion",name:"MdiEyeLock",className:"w-4 h-4"}),"Sesión activa: ",e.jsx("span",{className:"font-medium",children:r.email})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxs("span",{className:"badge badge-primary flex items-center gap-1",children:[e.jsx(s,{category:"Usuario",name:"MaterialSymbolsShieldLocked",className:"w-3 h-3"}),"Rol: ",r.role||"—"]}),r.role==="vendedor"&&r.vendedor_estado!=="aprobado"&&e.jsxs("span",{className:"badge badge-warning flex items-center gap-1",children:[e.jsx(s,{category:"Estados y Feedback",name:"MaterialSymbolsWarning",className:"w-3 h-3"}),"Vendedor: ",r.vendedor_estado]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs("button",{className:"btn-primary flex items-center gap-2",onClick:()=>m("/"),children:[e.jsx(s,{category:"Navegación principal",name:"MdiHome",className:"w-4 h-4"}),"Ir al inicio"]}),e.jsxs("button",{className:"btn-outline flex items-center gap-2",onClick:()=>f(),children:[e.jsx(s,{category:"Autenticacion",name:"MajesticonsLogout",className:"w-4 h-4"}),"Cerrar sesión"]})]})]})}):e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"mb-6 inline-flex rounded-lg border border-gray-200 p-1 bg-white",children:[e.jsxs("button",{type:"button",onClick:()=>{d("login"),i(null),c(null)},className:`px-4 py-2 text-sm font-medium rounded-md transition-colors flex items-center gap-2 ${a==="login"?"bg-primary-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(s,{category:"Autenticacion",name:"OouiLogInLtr",className:"w-4 h-4"}),"Iniciar sesión"]}),e.jsxs("button",{type:"button",onClick:()=>{d("signup"),i(null),c(null)},className:`px-4 py-2 text-sm font-medium rounded-md transition-colors flex items-center gap-2 ${a==="signup"?"bg-primary-600 text-white":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(s,{category:"Autenticacion",name:"TdesignLogin",className:"w-4 h-4"}),"Crear cuenta"]})]}),u&&e.jsxs("div",{className:"mb-4 rounded-lg bg-red-50 text-red-700 px-3 py-2 text-sm flex items-center gap-2",children:[e.jsx(s,{category:"Estados y Feedback",name:"BxsErrorAlt",className:"w-4 h-4"}),u]}),x&&e.jsxs("div",{className:"mb-4 rounded-lg bg-green-50 text-green-700 px-3 py-2 text-sm flex items-center gap-2",children:[e.jsx(s,{category:"Estados y Feedback",name:"IconParkSolidSuccess",className:"w-4 h-4"}),x]}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[a==="signup"&&e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label flex items-center gap-2",htmlFor:"role",children:[e.jsx(s,{category:"Usuario",name:"MaterialSymbolsShieldLocked",className:"w-4 h-4"}),"Tipo de cuenta"]}),e.jsxs("select",{id:"role",value:g,onChange:t=>v(t.target.value),className:"form-select",children:[e.jsx("option",{value:"comprador",children:"Comprador"}),e.jsx("option",{value:"vendedor",children:"Vendedor"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label flex items-center gap-2",htmlFor:"email",children:[e.jsx(s,{category:"Autenticacion",name:"MdiMail",className:"w-4 h-4"}),"Email"]}),e.jsx("input",{id:"email",placeholder:"tu@email.com",value:o,onChange:t=>w(t.target.value),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{className:"form-label flex items-center gap-2",htmlFor:"password",children:[e.jsx(s,{category:"Autenticacion",name:"MdiEyeLock",className:"w-4 h-4"}),"Contraseña"]}),e.jsx("input",{id:"password",placeholder:"••••••••",type:"password",value:l,onChange:t=>S(t.target.value),className:"form-input"})]}),e.jsx("button",{type:"submit",disabled:p,className:"btn-primary w-full flex items-center justify-center gap-2",children:p?e.jsxs(e.Fragment,{children:[e.jsx(s,{category:"Estados y Feedback",name:"HugeiconsReload",className:"w-4 h-4 animate-spin"}),"Procesando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(s,{category:"Autenticacion",name:a==="login"?"OouiLogInLtr":"TdesignLogin",className:"w-4 h-4"}),a==="login"?"Entrar":"Registrar"]})}),e.jsxs("button",{type:"button",onClick:()=>d(t=>t==="login"?"signup":"login"),className:"w-full text-sm text-primary-600 hover:text-primary-700 flex items-center justify-center gap-2",children:[e.jsx(s,{category:"Autenticacion",name:a==="login"?"TdesignLogin":"OouiLogInLtr",className:"w-4 h-4"}),a==="login"?"¿No tienes cuenta? Crear cuenta":"Ya tengo cuenta"]})]})]})},U=()=>e.jsx("div",{className:"min-h-[calc(100vh-120px)] grid place-items-center bg-gradient-to-br from-primary-50 to-white",children:e.jsx("div",{className:"container-sm",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-center",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx("div",{className:"card card-hover",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Bienvenido a Tesoros del Chocó"}),e.jsx("p",{className:"text-gray-600",children:"Inicia sesión o crea tu cuenta para comprar artesanías o publicar tus productos como vendedor."}),e.jsxs("ul",{className:"mt-4 space-y-2 text-sm text-gray-600",children:[e.jsx("li",{children:"• Compradores: acceden inmediatamente"}),e.jsx("li",{children:"• Vendedores: requieren aprobación de administrador"})]})]})})}),e.jsx("div",{className:"card card-hover",children:e.jsx("div",{className:"card-body",children:e.jsx(I,{})})})]})})});export{U as AuthPage};
