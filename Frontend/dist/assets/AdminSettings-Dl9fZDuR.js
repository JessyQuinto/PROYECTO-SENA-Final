import{j as e}from"./radix-pxeQr2vL.js";import{b as s}from"./react-9ItUixmA.js";import{s as n}from"./index-DDd0kLwX.js";import{A as x}from"./AdminLayout-C4V03p12.js";import"./supabase-D999gSRu.js";import"./shadcn_misc-DPVfRoQl.js";const N=()=>{const[t,o]=s.useState(!0),[i,r]=s.useState(""),[m,c]=s.useState(!0),[l,d]=s.useState(!1),u=async()=>{c(!0);const[{data:a},{data:p}]=await Promise.all([n.from("app_config").select("value").eq("key","notify_vendor_email_enabled").maybeSingle(),n.from("app_config").select("value").eq("key","notify_from").maybeSingle()]);o(a?.value?.enabled??!0),r(p?.value?.from??"Tesoros Chocó <notificaciones@tu-dominio.com>"),c(!1)};s.useEffect(()=>{u()},[]);const f=async()=>{d(!0),await n.from("app_config").upsert([{key:"notify_vendor_email_enabled",value:{enabled:t}},{key:"notify_from",value:{from:i}}]),d(!1)};return e.jsx(x,{title:"Configuración",subtitle:"Ajustes de notificaciones",children:m?e.jsx("p",{children:"Cargando..."}):e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-body space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Notificar por email al aprobar/rechazar vendedores"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Usa Brevo vía Edge Function segura"})]}),e.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only",checked:t,onChange:a=>o(a.target.checked)}),e.jsx("span",{className:`w-11 h-6 flex items-center bg-gray-300 rounded-full p-1 transition ${t?"bg-green-500":""}`,children:e.jsx("span",{className:`bg-white w-4 h-4 rounded-full shadow transform transition ${t?"translate-x-5":""}`})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Remitente (from)"}),e.jsx("input",{className:"input",value:i,onChange:a=>r(a.target.value),placeholder:"Tesoros Chocó <notificaciones@tu-dominio.com>"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Configura un remitente verificado en Brevo, por ejemplo: "Tesoros Chocó <notificaciones@tu-dominio.com>".'})]})]}),e.jsx("div",{className:"card-footer",children:e.jsx("button",{className:"btn-cta",onClick:f,disabled:l,children:l?"Guardando...":"Guardar"})})]})})};export{N as default};
