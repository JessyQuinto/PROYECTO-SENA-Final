import{j as e}from"./radix-pxeQr2vL.js";import{i as w,b as a,L as m}from"./react-9ItUixmA.js";import{u as y,B as S}from"./index-DDd0kLwX.js";import{I as u}from"./input-s_SeVYy5.js";import{L as h}from"./label-BStnk5CR.js";import{o as E,s as x}from"./shadcn_misc-DPVfRoQl.js";import"./supabase-D999gSRu.js";const I=E({email:x().email(),password:x().min(6)}),q=()=>{const{signIn:p,refreshProfile:v,user:L}=y(),g=w(),[r,j]=a.useState(""),[t,f]=a.useState(""),[c,i]=a.useState(null),[l,o]=a.useState(!1),N=async s=>{if(s.preventDefault(),i(null),!I.safeParse({email:r,password:t}).success){i("Datos inválidos");return}o(!0);const n=await p(r,t);if(n.error){i(n.error),window.toast?.error(n.error,{action:"login"}),o(!1);return}await v();const d=(await window.supabase?.auth.getUser?.())?.data?.user?.user_metadata?.role,b=d==="vendedor"?"/vendedor":d==="admin"?"/admin":"/";window.toast?.success("Bienvenido",{action:"login"}),g(b,{replace:!0}),o(!1)};return e.jsxs("div",{className:"min-h-[calc(100vh-120px)] grid place-items-center relative overflow-hidden",children:[e.jsx("div",{"aria-hidden":!0,className:"absolute inset-0 opacity-15",style:{backgroundImage:"linear-gradient(to right, rgba(0,0,0,0.05), rgba(0,0,0,0.00)), url('/assert/afrique-doodle-set/7311.jpg')",backgroundSize:"cover",backgroundPosition:"center"}}),e.jsx("div",{className:"container-sm relative z-10",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-center",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx("div",{className:"card card-hover",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-2 font-display",children:"Bienvenido de nuevo"}),e.jsx("p",{className:"opacity-80",children:"Inicia sesión para continuar explorando artesanías auténticas."})]})})}),e.jsx("div",{className:"card card-hover",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Iniciar sesión"}),c&&e.jsx("div",{className:"mb-4 rounded-lg bg-red-50 text-red-700 px-3 py-2 text-sm",children:c}),e.jsxs("form",{className:"space-y-4",onSubmit:N,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"email",children:"Email"}),e.jsx(u,{id:"email",placeholder:"tu@email.com",value:r,onChange:s=>j(s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(h,{htmlFor:"password",children:"Contraseña"}),e.jsx(u,{id:"password",type:"password",placeholder:"••••••••",value:t,onChange:s=>f(s.target.value)})]}),e.jsx(S,{type:"submit",className:"w-full",disabled:l,children:l?"Procesando...":"Entrar"}),e.jsxs("div",{className:"text-sm text-center",children:["¿No tienes cuenta?"," ",e.jsx(m,{to:"/register",className:"text-(--color-terracotta-suave) hover:underline",children:"Crear cuenta"})]}),e.jsx("div",{className:"text-sm text-center",children:e.jsx(m,{to:"/forgot-password",className:"text-(--color-terracotta-suave) hover:underline",children:"¿Olvidaste tu contraseña?"})})]})]})})]})})]})};export{q as LoginPage,q as default};
