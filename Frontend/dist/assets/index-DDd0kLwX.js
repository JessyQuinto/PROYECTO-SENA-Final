const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Auth-CIjmrTWz.js","assets/radix-pxeQr2vL.js","assets/react-9ItUixmA.js","assets/shadcn_misc-DPVfRoQl.js","assets/supabase-D999gSRu.js","assets/Login-BknfWefG.js","assets/input-s_SeVYy5.js","assets/label-BStnk5CR.js","assets/Register-CvIe8tOB.js","assets/checkbox-Yuj4HFAq.js","assets/VerifyEmail-D8tfbTAM.js","assets/ForgotPassword-D354jxh5.js","assets/ResetPassword-_w5wPHtt.js","assets/AdminDashboard-Tp97B96G.js","assets/AdminLayout-C4V03p12.js","assets/CategoriesAdmin-CRjq0ByD.js","assets/UsersAdmin-D6DGF04c.js","assets/ModerationAdmin-U4R0Z7Qq.js","assets/MetricsAdmin-DnL8cLuA.js","assets/AuditLogAdmin-DptKTb1A.js","assets/AdminSettings-Dl9fZDuR.js","assets/VendorDashboard-CprNNk-c.js","assets/ProductCatalog-CkBA6_vs.js","assets/ProductDetail-CXpyv_ka.js","assets/CartPage-BA0TlE3G.js","assets/MyOrdersPage-EO4wiixS.js","assets/ReviewsPage-D311CXKo.js","assets/CheckoutPage-B4e9Fod-.js","assets/OrderReceiptPage-BIJPRMHQ.js","assets/OrderDetailPage-CLtjR6KQ.js","assets/BuyerProfile-BpaFGJWX.js","assets/ProfilesManager-BJpODxdU.js"])))=>i.map(i=>d[i]);
import{j as e,S as Z}from"./radix-pxeQr2vL.js";import{e as Y,b as o,u as F,L as p,c as V,N as O,B as K,f as Q,h as g}from"./react-9ItUixmA.js";import{c as X,_ as j}from"./supabase-D999gSRu.js";import{t as ee,c as se,a as re,b as M,T as ae}from"./shadcn_misc-DPVfRoQl.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const m of n)if(m.type==="childList")for(const t of m.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&i(t)}).observe(document,{childList:!0,subtree:!0});function a(n){const m={};return n.integrity&&(m.integrity=n.integrity),n.referrerPolicy&&(m.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?m.credentials="include":n.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function i(n){if(n.ep)return;n.ep=!0;const m=a(n);fetch(n.href,m)}})();var T={},D;function te(){if(D)return T;D=1;var s=Y();return T.createRoot=s.createRoot,T.hydrateRoot=s.hydrateRoot,T}var oe=te();const ne="https://jdmexfawmetmfabpwlfs.supabase.co",ie="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpkbWV4ZmF3bWV0bWZhYnB3bGZzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ2MzAzMTYsImV4cCI6MjA3MDIwNjMxNn0.nb6WPz87vBq5CjZuL4LB8ZV45jeD-B-a4qzJh0j4J6g",f=X(ne,ie,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},global:{headers:{"x-application-name":"tesoros-choco-frontend"}}});try{typeof window<"u"&&f&&(window.supabase=f)}catch{}const Qe=Object.freeze(Object.defineProperty({__proto__:null,supabase:f},Symbol.toStringTag,{value:"Module"})),q=o.createContext(void 0),ce=({children:s})=>{const[r,a]=o.useState(null),[i,n]=o.useState(!0),m="http://localhost:4000",t=d=>{const c=d?.user;return!!(c?.email_confirmed_at||c?.confirmed_at||c?.email_confirmed)},u=async d=>{if(!f)return;const{data:c,error:v}=await f.from("users").select("id, email, role, vendedor_estado, bloqueado, nombre_completo").eq("id",d).maybeSingle();if(v){console.warn("[auth] No se pudo cargar perfil users:",v.message);return}if(c){if(c.bloqueado){await f.auth.signOut(),a(null);return}a({id:c.id,email:c.email||void 0,nombre:c.nombre_completo||void 0,role:c.role||void 0,vendedor_estado:c.vendedor_estado,bloqueado:!!c.bloqueado});return}};o.useEffect(()=>{if(!f){n(!1);return}(async()=>{try{const c=typeof window<"u"?window.location.hash:"",v=typeof window<"u"?window.location.search:"",w=(c&&c.startsWith("#")?c.substring(1):c)||(v&&v.startsWith("?")?v.substring(1):"");if(new URLSearchParams(w).get("type")==="signup"){await f.auth.signOut(),a(null);try{window.history.replaceState({},document.title,window.location.pathname)}catch{}window.toast?.success("Correo confirmado. Inicia sesión.",{action:"login"}),n(!1);try{window.location.replace("/login")}catch{}return}}catch{}})();const{data:d}=f.auth.onAuthStateChange((c,v)=>{if(v?.user){if(!t(v)){f.auth.signOut().finally(()=>{a(null),window.toast?.error("Confirma tu correo para iniciar sesión",{action:"login"}),n(!1)});return}u(v.user.id).finally(()=>n(!1))}else a(null),n(!1)});return f.auth.getSession().then(async({data:c})=>{const v=c.session;if(v?.user){if(!t(v)){await f.auth.signOut(),a(null),n(!1);return}await u(v.user.id)}n(!1)}),()=>{d.subscription.unsubscribe()}},[]);const y=async(d,c)=>{if(!f)return{error:"Supabase no configurado"};const{data:v,error:w}=await f.auth.signInWithPassword({email:d,password:c});if(!w&&v.user){const C=(await f.auth.getSession()).data.session;if(!t(C))return await f.auth.signOut(),{error:"Debes confirmar tu correo antes de iniciar sesión"};await u(v.user.id)}return{error:w?.message}},h=async(d,c,v,w)=>{if(!f)return{error:"Supabase no configurado"};const{data:C,error:l}=await f.auth.signUp({email:d,password:c,options:{data:{role:v,...w},emailRedirectTo:window.location.origin}});if(l)return{error:l.message};if(C.user?.id)try{if(m){let _=!1;try{_=(await fetch(`${m.replace(/\/$/,"")}/auth/post-signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:C.user.id,email:d,role:v,nombre:w?.nombre})})).ok}catch{_=!1}if(!_){const{error:R}=await f.from("users").insert({id:C.user.id,email:d,role:v,vendedor_estado:v==="vendedor"?"pendiente":null,nombre_completo:w?.nombre??null});R&&console.warn("[auth] Error creando perfil de usuario (fallback):",R)}}}catch(_){console.warn("[auth] Error en post-signup:",_)}return{error:void 0}},x=async()=>{f&&await f.auth.signOut()},b=async()=>{if(!f)return;const d=(await f.auth.getSession()).data.session;d?.user?.id&&await u(d.user.id)};return e.jsx(q.Provider,{value:{user:r,loading:i,signIn:y,signUp:h,signOut:x,refreshProfile:b},children:s})},P=()=>{const s=o.useContext(q);if(!s)throw new Error("useAuth debe usarse dentro de AuthProvider");return s},U=o.createContext(void 0),le="tc_cart_v1",de=({children:s})=>{const[r,a]=o.useState([]),{user:i}=P(),n=i?.id?`${le}_${i.id}`:null;o.useEffect(()=>{if(!n){a([]);return}try{const x=localStorage.getItem(n);a(x?JSON.parse(x):[])}catch{a([])}},[n]),o.useEffect(()=>{if(n)try{localStorage.setItem(n,JSON.stringify(r))}catch{}},[r,n]);const m=x=>{a(b=>b.find(c=>c.productoId===x.productoId)?b.map(c=>c.productoId===x.productoId?{...c,cantidad:Math.min(c.cantidad+x.cantidad,c.stock??1/0)}:c):[...b,x])},t=(x,b)=>{a(d=>d.map(c=>c.productoId===x?{...c,cantidad:Math.max(1,Math.min(b,c.stock??1/0))}:c))},u=x=>a(b=>b.filter(d=>d.productoId!==x)),y=()=>a([]),h=o.useMemo(()=>r.reduce((x,b)=>x+b.precio*b.cantidad,0),[r]);return e.jsx(U.Provider,{value:{items:r,total:h,add:m,update:t,remove:u,clear:y},children:s})},W=()=>{const s=o.useContext(U);if(!s)throw new Error("useCart debe usarse dentro de CartProvider");return s};function E(...s){return ee(se(s))}const me=re("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),I=o.forwardRef(({className:s,variant:r,size:a,asChild:i=!1,...n},m)=>{const t=i?Z:"button";return e.jsx(t,{className:E(me({variant:r,size:a,className:s})),ref:m,...n})});I.displayName="Button";const k=({category:s,name:r,className:a,alt:i,width:n,height:m})=>{const t={Administrador:{Users:"TablerUsers",Gavel:"FluentGavel32Filled",BarChart3:"SimpleIconsGoogleanalytics",History:"LucideFileClock"}},u=s,h=(t[u]||{})[r]||r,x=`/${encodeURIComponent(u)}/${encodeURIComponent(h)}.svg`;return e.jsx("img",{src:x,alt:i||r,className:a,width:n,height:m,onError:b=>{const d=b.currentTarget;d.src.endsWith(".svg")&&(d.src="/favicon.svg")}})};function ue(){try{const s=localStorage.getItem("theme");return s==="nord-dark"||s==="nord-light"?s:"auto"}catch{return"auto"}}function he(s){const r=document.documentElement;r.classList.remove("nord-dark","nord-light"),s==="nord-dark"&&r.classList.add("nord-dark"),s==="nord-light"&&r.classList.add("nord-light")}const B=({className:s})=>{const[r,a]=o.useState(ue()),i=o.useMemo(()=>typeof window>"u"?!1:r==="nord-dark"?!0:r==="nord-light"?!1:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,[r]);o.useEffect(()=>{if(he(i?"nord-dark":"nord-light"),r==="nord-dark"||r==="nord-light")try{localStorage.setItem("theme",r)}catch{}else try{localStorage.removeItem("theme")}catch{}},[r,i]),o.useEffect(()=>{if(r!=="auto"||typeof window>"u")return;const t=window.matchMedia("(prefers-color-scheme: dark)"),u=()=>{a(y=>y)};return t.addEventListener?.("change",u),t.addListener?.(u),()=>{t.removeEventListener?.("change",u),t.removeListener?.(u)}},[r]);const n=()=>{a(t=>t==="nord-light"?"auto":"nord-light")},m=()=>{a(t=>t==="nord-dark"?"auto":"nord-dark")};return e.jsxs("div",{className:`theme-toggle ${s??""}`,role:"group","aria-label":"Preferencia de tema",children:[e.jsxs("button",{type:"button",title:r==="nord-light"?"Claro (clic para seguir sistema)":"Claro","aria-pressed":r==="nord-light"||r==="auto"&&!i,className:`seg ${r==="nord-light"||r==="auto"&&!i?"active":""}`,onClick:n,children:[e.jsxs("svg",{className:"sun-icon",viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2m0 14v2m9-9h-2M5 12H3m15.364-6.364l-1.414 1.414M7.05 16.95l-1.414 1.414m12.728 0l-1.414-1.414M7.05 7.05L5.636 5.636"}),e.jsx("circle",{cx:"12",cy:"12",r:"4"})]}),e.jsx("span",{className:"sr-only",children:"Claro"})]}),e.jsxs("button",{type:"button",title:r==="nord-dark"?"Oscuro (clic para seguir sistema)":"Oscuro","aria-pressed":r==="nord-dark"||r==="auto"&&i,className:`seg ${r==="nord-dark"||r==="auto"&&i?"active":""}`,onClick:m,children:[e.jsx("svg",{className:"moon-icon",viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.354 15.354A9 9 0 118.646 3.646 7 7 0 0020.354 15.354z"})}),e.jsx("span",{className:"sr-only",children:"Oscuro"})]})]})},xe=()=>{const{user:s,signOut:r}=P(),[a,i]=o.useState(!1),n=F(),{items:m,total:t,remove:u,update:y}=W(),h=m.reduce((l,_)=>l+(_.cantidad||0),0),[x,b]=o.useState(!1),d=async()=>{await r(),i(!1)},c=l=>n.pathname===l,w=[{path:"/",label:"Inicio",public:!0},{path:"/productos",label:"Productos",public:!0},{path:"/perfil",label:"Mi perfil",roles:["comprador"]},{path:"/vendedor",label:"Panel Vendedor",roles:["vendedor"],requireApproval:!0},{path:"/admin",label:"Administración",roles:["admin"]}].filter(l=>l.public?!0:!(!s||l.roles&&!l.roles.includes(s.role||"")||l.requireApproval&&s.role==="vendedor"&&s.vendedor_estado!=="aprobado")),C=o.useMemo(()=>{if(!s?.email)return"U";const l=s.email.trim()[0]?.toUpperCase();return/[A-Z]/.test(l)?l:"U"},[s?.email]);return e.jsx(e.Fragment,{children:e.jsxs("nav",{className:"sticky top-0 z-50 glass border-b shadow-sm relative",children:[e.jsx("div",{"aria-hidden":!0,className:"absolute inset-0 opacity-10 pointer-events-none z-0",style:{backgroundImage:"url('/assert/motif-de-fond-sans-couture-tribal-dessin-geometrique-noir-et-blanc-vecteur/v1045-03.jpg')",backgroundSize:"cover",backgroundPosition:"center"}}),e.jsxs("div",{className:"container relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs(p,{to:"/",className:"flex items-center space-x-3 text-xl font-extrabold text-(--color-marron-cacao) tracking-tight",children:[e.jsx("img",{src:"/logo.svg",alt:"Tesoros Chocó",className:"w-9 h-9 rounded-xl shadow-md"}),e.jsx("span",{className:"hidden sm:block",children:"Tesoros Chocó"})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-1",children:[w.map(l=>{const _=c(l.path);return e.jsx(p,{to:l.path,className:`nav-link ${_?"nav-link-active font-semibold":""}`,children:l.label},l.path)}),s?.role==="comprador"&&e.jsxs("div",{className:"relative ml-2",children:[e.jsxs("button",{type:"button","aria-label":"Abrir carrito",onClick:()=>b(l=>!l),className:"px-3 py-2 rounded-lg hover:bg-(--color-marfil) transition-colors",children:[e.jsx(k,{category:"Navegación principal",name:"WhhShoppingbag",className:"w-5 h-5 opacity-80"}),h>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-[10px] leading-none px-1.5 py-0.5 rounded-full shadow",children:h})]}),x&&e.jsxs("div",{className:"absolute right-0 mt-2 w-96 bg-white glass rounded-2xl shadow-2xl z-50 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b bg-gray-50/60",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Tu carrito"}),e.jsxs("p",{className:"text-base font-semibold",children:[h," artículo",h!==1?"s":""]})]}),e.jsx("button",{"aria-label":"Cerrar carrito",className:"p-2 rounded-lg hover:bg-gray-100",onClick:()=>b(!1),children:e.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsx("div",{className:"max-h-80 overflow-auto divide-y",children:m.length===0?e.jsxs("div",{className:"p-8 text-center text-sm text-gray-500",children:[e.jsx("div",{className:"mx-auto mb-3 w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-gray-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 3h2l.4 2M7 13h10l3-8H6.4M7 13L5.4 5M7 13l-2 9m12-9l2 9M10 21a1 1 0 100-2 1 1 0 000 2zm8 0a1 1 0 100-2 1 1 0 000 2z"})})}),"Tu carrito está vacío."]}):m.map(l=>e.jsxs("div",{className:"p-4 flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0",children:l.imagenUrl?e.jsx("img",{src:l.imagenUrl,alt:l.nombre,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"—"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:l.nombre}),e.jsxs("div",{className:"mt-1 flex items-center gap-3",children:[e.jsxs("div",{className:"inline-flex items-center border rounded-lg",children:[e.jsx("button",{"aria-label":"Disminuir",className:"px-2 py-1 text-sm hover:bg-gray-50",onClick:()=>y(l.productoId,Math.max(1,l.cantidad-1)),children:"-"}),e.jsx("input",{"aria-label":"Cantidad",type:"number",className:"w-12 text-center text-sm outline-none",min:1,max:l.stock??9999,value:l.cantidad,onChange:_=>y(l.productoId,Math.max(1,Math.min(Number(_.target.value||1),l.stock??9999)))}),e.jsx("button",{"aria-label":"Aumentar",className:"px-2 py-1 text-sm hover:bg-gray-50",onClick:()=>y(l.productoId,Math.min(l.cantidad+1,l.stock??9999)),children:"+"})]}),e.jsxs("span",{className:"text-sm font-semibold text-(--color-terracotta-suave)",children:["$",(l.precio*l.cantidad).toLocaleString()]})]})]}),e.jsx("button",{"aria-label":"Quitar del carrito",className:"p-2 text-gray-400 hover:text-red-600",onClick:()=>u(l.productoId),children:e.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6M1 7h22M8 7V5a2 2 0 012-2h4a2 2 0 012 2v2"})})})]},l.productoId))}),e.jsxs("div",{className:"p-4 border-t bg-gray-50/60",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-3",children:[e.jsx("span",{className:"text-gray-600",children:"Total"}),e.jsxs("span",{className:"text-lg font-bold text-(--color-marron-cacao)",children:["$",t.toLocaleString()]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(p,{to:"/carrito",onClick:()=>b(!1),className:"btn btn-outline text-center",children:"Ver carrito"}),e.jsx(p,{to:"/checkout",onClick:()=>b(!1),className:"btn btn-primary text-center",children:"Pagar ahora"})]})]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"hidden sm:block",children:e.jsx(B,{})}),s?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"hidden sm:flex flex-col items-end leading-tight",children:[e.jsx("span",{className:"text-sm font-medium text-(--color-marron-cacao)",children:s.nombre||s.email}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs opacity-80 capitalize text-(--color-marron-cacao)",children:s.role}),s.role==="vendedor"&&e.jsx("span",{className:`badge text-[10px] ${s.vendedor_estado==="aprobado"?"badge-success":s.vendedor_estado==="pendiente"?"badge-warning":"badge-danger"}`,children:s.vendedor_estado})]})]}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-(--color-terracotta-suave) text-white flex items-center justify-center text-sm font-bold select-none",children:C}),e.jsx("button",{type:"button",onClick:d,className:"p-2 rounded-lg hover:bg-(--color-marfil) nav-auth-icon","aria-label":"Salir",title:"Salir",children:e.jsx(k,{category:"Autenticacion",name:"OouiLogInRtl",className:"w-6 h-6"})})]}):e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[e.jsx(p,{to:"/login",className:"hidden sm:block",children:e.jsx(I,{variant:"secondary",children:"Iniciar sesión"})}),e.jsx(p,{to:"/register",className:"hidden sm:block",children:e.jsx(I,{children:"Crear cuenta"})}),e.jsx(p,{to:"/login",className:"sm:hidden p-2 rounded-lg hover:bg-(--color-marfil) nav-auth-icon","aria-label":"Iniciar sesión",children:e.jsx(k,{category:"Autenticacion",name:"OouiLogInLtr",className:"w-6 h-6"})}),e.jsx(p,{to:"/register",className:"sm:hidden p-2 rounded-lg hover:bg-(--color-marfil) nav-auth-icon","aria-label":"Crear cuenta",children:e.jsx(k,{category:"Usuario",name:"IconamoonProfileFill",className:"w-6 h-6"})})]}),e.jsx("button",{onClick:()=>i(!a),className:"md:hidden p-2 rounded-lg transition-colors text-(--color-marron-cacao) hover:bg-(--color-marfil)","aria-label":a?"Cerrar menú":"Abrir menú",title:a?"Cerrar menú":"Abrir menú",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),a&&e.jsx("div",{className:"md:hidden border-t bg-(--color-card) border-(--color-border)",children:e.jsxs("div",{className:"px-3 pt-3 pb-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between px-1 py-1",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Tema"}),e.jsx(B,{})]}),s?.role==="comprador"&&e.jsxs(p,{to:"/carrito",onClick:()=>i(!1),className:"block px-3 py-2 rounded-full text-base transition-colors hover:bg-gray-100",children:["Carrito ",h>0&&e.jsx("span",{className:"ml-2 badge badge-danger",children:h})]}),w.map(l=>e.jsx(p,{to:l.path,onClick:()=>i(!1),className:`block px-3 py-2 rounded-full text-base transition-colors ${c(l.path)?"bg-gray-100 font-semibold":"hover:bg-gray-100"}`,children:l.label},l.path)),s&&e.jsxs("div",{className:"pt-3 border-t mt-3 border-(--color-border) flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-(--color-terracotta-suave) text-white flex items-center justify-center text-sm font-bold",children:C}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-(--color-marron-cacao)",children:s.email}),e.jsx("div",{className:"text-xs opacity-80 capitalize text-(--color-marron-cacao)",children:s.role})]})]}),e.jsx(I,{variant:"secondary",size:"sm",onClick:()=>{d(),i(!1)},children:"Salir"})]})]})})]})]})})},pe=()=>{const s=F(),{user:r}=P(),{items:a}=W(),i=a.reduce((d,c)=>d+(c.cantidad||0),0),n=d=>s.pathname===d,m=r?.role==="comprador",t=r?.vendedor_estado,u=r?.role==="vendedor"&&t==="aprobado",y=r?.role==="admin",h=[];h.push({path:"/",label:"Inicio",icon:{category:"Navegación principal",name:"MdiHome"}}),h.push({path:"/productos",label:"Productos",icon:{category:"Navegación principal",name:"MdiGrid"}}),r&&(m?h.push({path:"/perfil",label:"Perfil",icon:{category:"Usuario",name:"IconamoonProfileFill"}}):r.role==="vendedor"?u?h.push({path:"/vendedor",label:"Vender",icon:{category:"Vendedor",name:"MaterialSymbolsDashboard"}}):t==="pendiente"?h.push({path:"/vendedor",label:"Estado",icon:{category:"Estados y Feedback",name:"IconoirWarningSquare"}}):h.push({path:"/auth",label:"Postularme",icon:{category:"Usuario",name:"RivetIconsSettings"}}):y?h.push({path:"/admin",label:"Admin",icon:{category:"Administrador",name:"RivetIconsSettings"}}):h.push({path:"/perfil",label:"Perfil",icon:{category:"Usuario",name:"IconamoonProfileFill"}}));const x=new Set,b=h.filter(d=>{const c=`${d.path}|${d.label}`;return x.has(c)?!1:(x.add(c),!0)}).slice(0,3);return e.jsxs("nav",{className:"mobile-tabbar md:hidden",role:"navigation","aria-label":"Navegación inferior",children:[e.jsx("ul",{className:"mobile-tabbar-list",children:b.map(d=>e.jsx("li",{children:e.jsxs(p,{to:d.path,className:`mobile-tabbar-item ${n(d.path)?"active":""}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx(k,{category:d.icon.category,name:d.icon.name,className:"w-6 h-6"}),d.showBadge&&i>0&&e.jsx("span",{className:"badge-count","aria-label":`${i} artículos en el carrito`,children:i})]}),e.jsx("span",{className:"label",children:d.label})]})},`${d.path}|${d.label}`))}),e.jsx("div",{className:"safe-bottom"})]})},L=o.forwardRef(({className:s,...r},a)=>e.jsx("div",{ref:a,className:E("rounded-lg border bg-card text-card-foreground shadow-sm relative overflow-hidden card-pattern",s),...r}));L.displayName="Card";const H=o.forwardRef(({className:s,...r},a)=>e.jsx("div",{ref:a,className:E("flex flex-col space-y-1.5 p-6",s),...r}));H.displayName="CardHeader";const S=o.forwardRef(({className:s,...r},a)=>e.jsx("div",{ref:a,className:E("text-2xl font-semibold leading-none tracking-tight",s),...r}));S.displayName="CardTitle";const z=o.forwardRef(({className:s,...r},a)=>e.jsx("div",{ref:a,className:E("text-sm text-muted-foreground",s),...r}));z.displayName="CardDescription";const A=o.forwardRef(({className:s,...r},a)=>e.jsx("div",{ref:a,className:E("p-6 pt-0",s),...r}));A.displayName="CardContent";const J=o.forwardRef(({className:s,...r},a)=>e.jsx("div",{ref:a,className:E("flex items-center p-6 pt-0",s),...r}));J.displayName="CardFooter";const $="cookie_consent",ge=()=>{const[s,r]=V.useState(!1);V.useEffect(()=>{try{localStorage.getItem($)||r(!0)}catch{r(!0)}},[]);const a=i=>{try{localStorage.setItem($,JSON.stringify({value:i,at:new Date().toISOString()}))}catch{}r(!1)};return s?e.jsx("div",{className:"fixed inset-x-4 bottom-4 z-50 md:inset-x-auto md:right-6 md:left-auto md:max-w-xl",children:e.jsxs(L,{className:"backdrop-blur supports-[backdrop-filter]:bg-background/80",style:{WebkitBackdropFilter:"blur(12px)"},children:[e.jsxs(H,{className:"pb-3",children:[e.jsx(S,{children:"Aviso de cookies"}),e.jsx(z,{children:"Esta aplicación tiene como propósito conectar artesanos del Chocó con el mundo, facilitando la venta de productos hechos a mano de manera segura y transparente. Usamos cookies esenciales para el funcionamiento del sitio y, opcionalmente, para mejorar tu experiencia. Puedes consultar la política de privacidad en la sección correspondiente."})]}),e.jsxs(A,{className:"pt-0 text-sm opacity-90",children:[e.jsxs("p",{className:"mb-2",children:["Proyecto educativo del SENA — Grupo 4: ",e.jsx("strong",{children:"Análisis y Desarrollo de Software (2879645)"}),"."]}),e.jsx("p",{className:"text-xs",children:'Al hacer clic en "Aceptar", consientes el uso de cookies esenciales y de preferencia.'})]}),e.jsxs(J,{className:"justify-end gap-2",children:[e.jsx(I,{variant:"secondary",onClick:()=>a("rejected"),children:"Rechazar"}),e.jsx(I,{onClick:()=>a("accepted"),children:"Aceptar"})]})]})}):null},fe=({children:s,className:r=""})=>{const{user:a}=P(),i=a?.role,n=i==="comprador",m=i==="vendedor",t=i==="admin";return e.jsxs("div",{className:"min-h-screen bg-background text-foreground",children:[e.jsx(xe,{}),e.jsx("main",{className:`${r} animate-in pb-24 md:pb-0`,children:s}),e.jsxs("footer",{className:"mt-auto border-t bg-card text-card-foreground relative overflow-hidden",children:[e.jsx("div",{"aria-hidden":!0,className:"absolute inset-0 opacity-10 pointer-events-none",style:{backgroundImage:"url('/assert/motif-de-fond-sans-couture-tribal-dessin-geometrique-noir-et-blanc-vecteur/v1045-03.jpg')",backgroundSize:"cover",backgroundPosition:"center"}}),e.jsxs("div",{className:"container py-12 relative z-10",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("img",{src:"/logo.svg",alt:"Tesoros Chocó",className:"w-8 h-8 rounded-lg"}),e.jsx("span",{className:"text-xl font-bold",children:"Tesoros Chocó"})]}),e.jsx("p",{className:"opacity-80 mb-4 text-balance",children:"Conectando artesanos del Chocó con el mundo. Descubre productos únicos y auténticos hechos a mano por talentosos artesanos colombianos."}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("a",{href:"#",className:"opacity-80 hover:opacity-100 transition-colors",children:[e.jsx("span",{className:"sr-only",children:"Facebook"}),e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M20 10C20 4.477 15.523 0 10 0S0 4.477 0 10c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V10h2.54V7.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V10h2.773l-.443 2.89h-2.33v6.988C16.343 19.128 20 14.991 20 10z",clipRule:"evenodd"})})]}),e.jsxs("a",{href:"#",className:"opacity-80 hover:opacity-100 transition-colors",children:[e.jsx("span",{className:"sr-only",children:"Instagram"}),e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M12.017 0H7.983C3.516 0 0 3.516 0 7.983v4.034C0 16.484 3.516 20 7.983 20h4.034C16.484 20 20 16.484 20 12.017V7.983C20 3.516 16.484 0 12.017 0zM10 15c-2.761 0-5-2.239-5-5s2.239-5 5-5 5 2.239 5 5-2.239 5-5 5zm5-9a1 1 0 11-2 0 1 1 0 012 0z",clipRule:"evenodd"})})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider mb-4 opacity-80",children:"Enlaces útiles"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx(p,{to:"/productos",className:"opacity-80 hover:opacity-100 transition-colors",children:"Productos"})}),n&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsx(p,{to:"/carrito",className:"opacity-80 hover:opacity-100 transition-colors",children:"Carrito"})}),e.jsx("li",{children:e.jsx(p,{to:"/mis-pedidos",className:"opacity-80 hover:opacity-100 transition-colors",children:"Mis pedidos"})})]}),!a&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:e.jsx(p,{to:"/login",className:"opacity-80 hover:opacity-100 transition-colors",children:"Iniciar sesión"})}),e.jsx("li",{children:e.jsx(p,{to:"/register",className:"opacity-80 hover:opacity-100 transition-colors",children:"Crear cuenta"})})]}),m&&e.jsx("li",{children:e.jsx(p,{to:"/vendedor",className:"opacity-80 hover:opacity-100 transition-colors",children:"Panel vendedor"})}),t&&e.jsx("li",{children:e.jsx(p,{to:"/admin",className:"opacity-80 hover:opacity-100 transition-colors",children:"Administración"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider mb-4 opacity-80",children:"Soporte"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx(p,{to:"/forgot-password",className:"opacity-80 hover:opacity-100 transition-colors",children:"Olvidé mi contraseña"})}),e.jsx("li",{children:e.jsx(p,{to:"/reset-password",className:"opacity-80 hover:opacity-100 transition-colors",children:"Restablecer contraseña"})}),e.jsx("li",{children:e.jsx(p,{to:"/verifica-tu-correo",className:"opacity-80 hover:opacity-100 transition-colors",children:"Verifica tu correo"})}),e.jsx("li",{children:e.jsx(p,{to:"/auth",className:"opacity-80 hover:opacity-100 transition-colors",children:"Centro de cuenta"})})]})]})]}),e.jsxs("div",{className:"border-t mt-8 pt-8 flex flex-col md:flex-row justify-between items-center",style:{borderColor:"color-mix(in oklab, var(--color-marfil) 80%, black)"},children:[e.jsx("p",{className:"text-sm opacity-80",children:"© 2025 Tesoros Chocó. Todos los derechos reservados. Proyecto SENA."}),e.jsx("p",{className:"text-sm mt-4 md:mt-0 opacity-80",children:"Fabricado con ❤️ en el Chocó, Colombia"})]})]})]}),e.jsx(pe,{}),e.jsx(ge,{})]})},je=()=>{const{user:s}=P(),[r,a]=o.useState([]),[i,n]=o.useState(!0);o.useEffect(()=>{m()},[]);const m=async()=>{try{const{data:t,error:u}=await f.from("productos").select(`
          id,
          nombre,
          precio,
          imagen_url,
          users!productos_vendedor_id_fkey(nombre_completo)
        `).eq("estado","activo").gt("stock",0).limit(6).order("created_at",{ascending:!1});if(u)throw u;a(t||[])}catch(t){console.error("Error loading featured products:",t)}finally{n(!1)}};return e.jsxs("div",{children:[e.jsx("section",{className:"relative overflow-hidden rounded-2xl mx-4 md:mx-10 mt-6 shadow-lg",children:e.jsx("div",{className:"bg-cover bg-center flex flex-col justify-end min-h-[56vh]",style:{backgroundImage:"linear-gradient(to top, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0.1) 50%), url('/assert/2/9a92cd16-82e0-4b9b-bc8f-a7805b2ad499.jpg')"},children:e.jsxs("div",{className:"p-8 md:p-16 text-white text-center",children:[e.jsx("h1",{className:"heading-hero mb-4",children:"Descubre el Alma del Pacífico"}),e.jsx("p",{className:"text-lg md:text-xl max-w-2xl mx-auto text-balance",children:"Producidas y fabricadas a mano por campesinos de la región."})]})})}),e.jsx("section",{className:"py-16",style:{backgroundColor:"var(--color-marfil)"},children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"heading-lg mb-4",children:"¿Por qué Tesoros Chocó?"}),e.jsx("p",{className:"text-lg opacity-80 max-w-2xl mx-auto text-balance",children:"Conectamos los oficios del Chocó con personas que valoran lo fabricado a mano, con historia y origen."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsx(L,{className:"text-center",children:e.jsxs(A,{className:"p-6",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",style:{backgroundColor:"color-mix(in oklab, var(--color-terracotta-suave) 15%, white)"},children:e.jsx("svg",{className:"w-8 h-8",style:{color:"var(--color-terracotta-suave)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),e.jsx(S,{className:"text-xl mb-2",children:"Piezas con historia"}),e.jsx(z,{className:"opacity-80",children:"Cada pieza nace en un taller real: materiales nobles, técnicas ancestrales y el sello de quien la crea."})]})}),e.jsx(L,{className:"text-center",children:e.jsxs(A,{className:"p-6",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",style:{backgroundColor:"color-mix(in oklab, var(--color-ocre-africano) 15%, white)"},children:e.jsx("svg",{className:"w-8 h-8",style:{color:"var(--color-ocre-africano)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),e.jsx(S,{className:"text-xl mb-2",children:"Impacto en la comunidad"}),e.jsx(z,{className:"opacity-80",children:"Tu compra impulsa el ingreso de familias campesinas y artesanas del Chocó."})]})}),e.jsx(L,{className:"text-center",children:e.jsxs(A,{className:"p-6",children:[e.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",style:{backgroundColor:"color-mix(in oklab, var(--color-verde-oliva-tenue) 20%, white)"},children:e.jsx("svg",{className:"w-8 h-8",style:{color:"var(--color-verde-oliva-tenue)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),e.jsx(S,{className:"text-xl mb-2",children:"Calidad que se siente"}),e.jsx(z,{className:"opacity-80",children:"Certificamos a cada uno de nuestros artesanos, verificamos las óptimas condiciones del producto y nos aseguramos que las piezas sean entregadas a su destino eficaz y cuidadosamente!."})]})})]})]})}),e.jsx("section",{className:"py-16",style:{backgroundColor:"color-mix(in oklab, var(--color-marfil) 95%, black)"},children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"heading-lg mb-2",children:"Recién salidas del taller"}),e.jsx("p",{className:"opacity-80",children:"Descubre lo nuevo, fabricado con manos del Pacífico"})]}),e.jsx(p,{to:"/productos",className:"hidden sm:block",children:e.jsx(I,{size:"lg",children:"Ver Todos"})}),e.jsx(p,{to:"/productos",className:"sm:hidden p-2 rounded-lg hover:bg-(--color-marfil)","aria-label":"Ver todos los productos",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})})]}),i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"loading-spinner w-8 h-8"})}):e.jsx("div",{className:"grid-auto-cards items-stretch content-start",children:r.slice(0,6).map(t=>e.jsx(p,{to:`/productos/${t.id}`,className:"group block h-full",children:e.jsxs(L,{className:"transition-all overflow-hidden group hover:shadow-xl border-gray-200 h-full flex flex-col",children:[e.jsx("div",{className:"relative bg-gray-100 overflow-hidden aspect-[3/2]",children:t.imagen_url?e.jsx("img",{src:t.imagen_url,alt:t.nombre,className:"absolute inset-0 w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):e.jsx("div",{className:"absolute inset-0 w-full h-full flex items-center justify-center text-gray-400",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),e.jsxs(A,{className:"p-4 flex flex-col flex-1",children:[e.jsx("div",{className:"min-h-[3.25rem]",children:e.jsx("h3",{className:"text-base font-semibold transition-colors group-hover:text-(--color-terracotta-suave) line-clamp-2",children:t.nombre})}),e.jsxs("div",{className:"flex items-center justify-between mt-auto",children:[e.jsxs("span",{className:"text-2xl font-bold text-(--color-terracotta-suave)",children:["$",t.precio.toLocaleString()]}),e.jsxs("span",{className:"text-sm opacity-75",children:["Por ",t.users?.nombre_completo||"Artesano"]})]})]})]})},t.id))})]})}),e.jsxs("section",{className:"relative overflow-hidden py-16 text-white",style:{backgroundColor:"var(--color-terracotta-suave)"},children:[e.jsx("div",{"aria-hidden":!0,className:"absolute inset-0 opacity-15",style:{backgroundImage:"url('/assert/conception-de-modele-africain-plat/6989328.jpg')",backgroundSize:"cover",backgroundPosition:"center",filter:"saturate(0.8) contrast(1.05)",pointerEvents:"none"}}),e.jsxs("div",{className:"container relative z-10 text-center",children:[e.jsx("h2",{className:"heading-lg mb-4",style:{color:"white"},children:"¿Eres artesano del Chocó?"}),e.jsx("p",{className:"text-xl mb-8 opacity-90 max-w-2xl mx-auto",children:"Súmate a Tesoros Chocó y muestra tu oficio al mundo. Te ayudamos a Impulsar tu emprendimiento, contar tu historia y llegar a más personas!."}),s?s.role==="vendedor"&&s.vendedor_estado==="aprobado"?e.jsx(p,{to:"/vendedor",children:e.jsx(I,{size:"lg",children:"Ir a mi Panel"})}):e.jsxs("div",{className:"inline-flex items-center px-6 py-3 rounded-lg bg-white/20 text-white",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Ya eres parte de Tesoros Chocó"]}):e.jsx(p,{to:"/auth",children:e.jsx(I,{size:"lg",children:"Únete como vendedor"})})]})]})]})},N=({children:s,roles:r})=>{const{user:a,loading:i}=P();return i?e.jsx("p",{children:"Cargando sesión..."}):a?r&&!r.includes(a.role||"")?e.jsx(O,{to:"/",replace:!0}):r?.includes("vendedor")&&a.vendedor_estado!=="aprobado"?e.jsx(O,{to:"/",replace:!0}):s:e.jsx(O,{to:"/",replace:!0})},ve=()=>e.jsxs("main",{style:{fontFamily:"system-ui",padding:"2rem",lineHeight:1.4},children:[e.jsxs("h1",{className:"flex items-center gap-3",children:[e.jsx(k,{category:"Navegación principal",name:"FaSolidStore",className:"w-8 h-8"}),"Marketplace Demo"]}),e.jsxs("p",{className:"flex items-center gap-2",children:[e.jsx(k,{category:"Estados y Feedback",name:"TypcnInfoLarge",className:"w-4 h-4"}),"Base inicial del frontend."]}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(k,{category:"Estados y Feedback",name:"IconParkSolidSuccess",className:"w-4 h-4"}),"React + Vite + TS"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(k,{category:"Estados y Feedback",name:"IconParkSolidSuccess",className:"w-4 h-4"}),"Estructura modular (modules)"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(k,{category:"Estados y Feedback",name:"IconParkSolidSuccess",className:"w-4 h-4"}),"Punto de entrada limpio"]})]}),e.jsxs("p",{style:{marginTop:"2rem",fontSize:"0.85rem",color:"#555"},className:"flex items-center gap-2",children:[e.jsx(k,{category:"Estados y Feedback",name:"TypcnInfoLarge",className:"w-4 h-4"}),"Extiende este demo añadiendo rutas, autenticación con Supabase y componentes UI."]})]}),G=o.createContext(void 0);function be(s,r,a){const i={register:"Registro",login:"Inicio de sesión",purchase:"Compra",sale:"Venta",update:"Actualización",delete:"Eliminación",approve:"Aprobación",reject:"Rechazo",ship:"Envío",cancel:"Cancelación",generic:"Notificación"},n={admin:"Administrador",vendedor:"Vendedor",comprador:"Comprador"},m=r?i[r]:"Notificación",t=s?n[s]:"Usuario";return a==="error"?`${m} (${t}) - Error`:a==="success"?`${m} (${t}) - Éxito`:`${m} (${t})`}const ye=({children:s})=>{const{user:r}=P(),a=o.useCallback(t=>{const u=t.role??r?.role,y=t.type??"info",h=t.title??be(u,t.action,y),x=t.durationMs??(y==="error"?6e3:4e3);y==="error"?M.error(h,{description:t.message,duration:x}):y==="success"?M.success(h,{description:t.message,duration:x}):y==="warning"?M(h,{description:t.message,duration:x}):M(h,{description:t.message,duration:x})},[r?.role]),i=o.useCallback((t,u)=>a({...u,type:"success",message:t}),[a]),n=o.useCallback((t,u)=>a({...u,type:"error",message:t}),[a]);o.useEffect(()=>(window.toast={notify:a,success:i,error:n},()=>{delete window.toast}),[a,i,n]);const m=o.useMemo(()=>({notify:a,success:i,error:n}),[a,i,n]);return e.jsx(G.Provider,{value:m,children:s})},Xe=()=>{const s=o.useContext(G);if(!s)throw new Error("useToast debe usarse dentro de ToastProvider");return s},Ne=({...s})=>e.jsx(ae,{className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...s}),we=o.lazy(()=>j(()=>import("./Auth-CIjmrTWz.js"),__vite__mapDeps([0,1,2,3,4]))),_e=o.lazy(()=>j(()=>import("./Login-BknfWefG.js"),__vite__mapDeps([5,1,2,6,7,3,4]))),ke=o.lazy(()=>j(()=>import("./Register-CvIe8tOB.js"),__vite__mapDeps([8,1,2,6,7,3,9,4]))),Ce=o.lazy(()=>j(()=>import("./VerifyEmail-D8tfbTAM.js"),__vite__mapDeps([10,1,2,6,7,3,4]))),Ie=o.lazy(()=>j(()=>import("./ForgotPassword-D354jxh5.js"),__vite__mapDeps([11,1,2,4,3]))),Pe=o.lazy(()=>j(()=>import("./ResetPassword-_w5wPHtt.js"),__vite__mapDeps([12,1,2,4,3]))),Ee=o.lazy(()=>j(()=>import("./AdminDashboard-Tp97B96G.js"),__vite__mapDeps([13,1,2,14,4,3]))),Le=o.lazy(()=>j(()=>import("./CategoriesAdmin-CRjq0ByD.js"),__vite__mapDeps([15,1,2,14,4,3]))),Ae=o.lazy(()=>j(()=>import("./UsersAdmin-D6DGF04c.js"),__vite__mapDeps([16,1,2,14,4,3]))),Se=o.lazy(()=>j(()=>import("./ModerationAdmin-U4R0Z7Qq.js"),__vite__mapDeps([17,1,2,14,4,3]))),ze=o.lazy(()=>j(()=>import("./MetricsAdmin-DnL8cLuA.js"),__vite__mapDeps([18,1,2,14,4,3]))),Me=o.lazy(()=>j(()=>import("./AuditLogAdmin-DptKTb1A.js"),__vite__mapDeps([19,1,2,14,4,3]))),Te=o.lazy(()=>j(()=>import("./AdminSettings-Dl9fZDuR.js"),__vite__mapDeps([20,1,2,14,4,3]))),Re=o.lazy(()=>j(()=>import("./VendorDashboard-CprNNk-c.js"),__vite__mapDeps([21,1,2,3,4]))),Oe=o.lazy(()=>j(()=>import("./ProductCatalog-CkBA6_vs.js"),__vite__mapDeps([22,1,2,6,4,3]))),Ve=o.lazy(()=>j(()=>import("./ProductDetail-CXpyv_ka.js"),__vite__mapDeps([23,1,2,6,4,3]))),De=o.lazy(()=>j(()=>import("./CartPage-BA0TlE3G.js"),__vite__mapDeps([24,1,2,4,3]))),Be=o.lazy(()=>j(()=>import("./MyOrdersPage-EO4wiixS.js"),__vite__mapDeps([25,1,2,4,3]))),$e=o.lazy(()=>j(()=>import("./ReviewsPage-D311CXKo.js"),__vite__mapDeps([26,1,2,4,3]))),Fe=o.lazy(()=>j(()=>import("./CheckoutPage-B4e9Fod-.js"),__vite__mapDeps([27,1,2,6,9,3,4]))),qe=o.lazy(()=>j(()=>import("./OrderReceiptPage-BIJPRMHQ.js"),__vite__mapDeps([28,4,2,1,3]))),Ue=o.lazy(()=>j(()=>import("./OrderDetailPage-CLtjR6KQ.js"),__vite__mapDeps([29,4,2,1,3]))),We=o.lazy(()=>j(()=>import("./BuyerProfile-BpaFGJWX.js"),__vite__mapDeps([30,4,2,1,3]))),He=o.lazy(()=>j(()=>import("./ProfilesManager-BJpODxdU.js"),__vite__mapDeps([31,1,2,6,4,3]))),Je=()=>e.jsx(ce,{children:e.jsx(K,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsx(de,{children:e.jsxs(ye,{children:[e.jsx(fe,{children:e.jsx(o.Suspense,{fallback:e.jsx("div",{className:"container py-10",children:"Cargando…"}),children:e.jsxs(Q,{children:[e.jsx(g,{path:"/",element:e.jsx(je,{})}),e.jsx(g,{path:"/productos",element:e.jsx(Oe,{})}),e.jsx(g,{path:"/productos/:id",element:e.jsx(Ve,{})}),e.jsx(g,{path:"/carrito",element:e.jsx(N,{roles:["comprador"],children:e.jsx(De,{})})}),e.jsx(g,{path:"/checkout",element:e.jsx(N,{roles:["comprador"],children:e.jsx(Fe,{})})}),e.jsx(g,{path:"/recibo/:id",element:e.jsx(N,{roles:["comprador","admin"],children:e.jsx(qe,{})})}),e.jsx(g,{path:"/pedido/:id",element:e.jsx(N,{roles:["comprador","admin"],children:e.jsx(Ue,{})})}),e.jsx(g,{path:"/mis-pedidos",element:e.jsx(N,{roles:["comprador"],children:e.jsx(Be,{})})}),e.jsx(g,{path:"/mis-calificaciones",element:e.jsx(N,{roles:["comprador"],children:e.jsx($e,{})})}),e.jsx(g,{path:"/perfil",element:e.jsx(N,{roles:["comprador"],children:e.jsx(We,{})})}),e.jsx(g,{path:"/perfil/perfiles",element:e.jsx(N,{roles:["comprador"],children:e.jsx(He,{})})}),e.jsx(g,{path:"/demo",element:e.jsx(ve,{})}),e.jsx(g,{path:"/auth",element:e.jsx(we,{})}),e.jsx(g,{path:"/login",element:e.jsx(_e,{})}),e.jsx(g,{path:"/register",element:e.jsx(ke,{})}),e.jsx(g,{path:"/verifica-tu-correo",element:e.jsx(Ce,{})}),e.jsx(g,{path:"/forgot-password",element:e.jsx(Ie,{})}),e.jsx(g,{path:"/reset-password",element:e.jsx(Pe,{})}),e.jsx(g,{path:"/admin",element:e.jsx(N,{roles:["admin"],children:e.jsx(Ee,{})})}),e.jsx(g,{path:"/admin/categorias",element:e.jsx(N,{roles:["admin"],children:e.jsx(Le,{})})}),e.jsx(g,{path:"/admin/usuarios",element:e.jsx(N,{roles:["admin"],children:e.jsx(Ae,{})})}),e.jsx(g,{path:"/admin/moderacion",element:e.jsx(N,{roles:["admin"],children:e.jsx(Se,{})})}),e.jsx(g,{path:"/admin/metricas",element:e.jsx(N,{roles:["admin"],children:e.jsx(ze,{})})}),e.jsx(g,{path:"/admin/auditoria",element:e.jsx(N,{roles:["admin"],children:e.jsx(Me,{})})}),e.jsx(g,{path:"/admin/configuracion",element:e.jsx(N,{roles:["admin"],children:e.jsx(Te,{})})}),e.jsx(g,{path:"/vendedor",element:e.jsx(N,{roles:["vendedor"],children:e.jsx(Re,{})})})]})})}),e.jsx(Ne,{position:"top-right",richColors:!0,closeButton:!0})]})})})});oe.createRoot(document.getElementById("root")).render(e.jsx(Je,{}));export{I as B,L as C,k as I,Xe as a,A as b,E as c,W as d,Qe as e,f as s,P as u};
