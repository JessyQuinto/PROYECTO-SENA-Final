import{j as e}from"./radix-pxeQr2vL.js";import{b as t,i as g,L as f}from"./react-9ItUixmA.js";import{s as v}from"./index-DDd0kLwX.js";import"./supabase-D999gSRu.js";import"./shadcn_misc-DPVfRoQl.js";const C=()=>{const[a,u]=t.useState(""),[n,p]=t.useState(""),[c,o]=t.useState(!1),[i,d]=t.useState(null),[m,l]=t.useState(null),x=g(),h=async s=>{if(s.preventDefault(),d(null),l(null),!a||a.length<6){l("La contraseña debe tener al menos 6 caracteres");return}if(a!==n){l("Las contraseñas no coinciden");return}o(!0);try{const{error:r}=await v.auth.updateUser({password:a});if(r)throw r;d("Contraseña actualizada. Redirigiendo a login…"),window.toast?.success("Contraseña actualizada",{action:"update"}),setTimeout(()=>x("/login",{replace:!0}),1500)}catch(r){l(r?.message||"No se pudo actualizar la contraseña"),window.toast?.error(r?.message||"No se pudo actualizar la contraseña",{action:"update"})}finally{o(!1)}};return e.jsx("div",{className:"min-h-[calc(100vh-120px)] grid place-items-center",children:e.jsx("div",{className:"container-sm",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-center",children:[e.jsx("div",{className:"hidden md:block",children:e.jsx("div",{className:"card card-hover",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-2 font-display",children:"Restablecer contraseña"}),e.jsx("p",{className:"opacity-80",children:"Crea una nueva contraseña para tu cuenta."})]})})}),e.jsx("div",{className:"card card-hover",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Nueva contraseña"}),m&&e.jsx("div",{className:"mb-4 rounded-lg bg-red-50 text-red-700 px-3 py-2 text-sm",children:m}),i&&e.jsx("div",{className:"mb-4 rounded-lg bg-green-50 text-green-700 px-3 py-2 text-sm",children:i}),e.jsxs("form",{className:"space-y-4",onSubmit:h,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"password",children:"Contraseña"}),e.jsx("input",{id:"password",type:"password",className:"input_field w-full",value:a,onChange:s=>u(s.target.value),placeholder:"••••••••"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",htmlFor:"confirm",children:"Confirmar contraseña"}),e.jsx("input",{id:"confirm",type:"password",className:"input_field w-full",value:n,onChange:s=>p(s.target.value),placeholder:"••••••••"})]}),e.jsx("button",{type:"submit",className:"btn btn-primary w-full",disabled:c,children:c?"Actualizando…":"Actualizar contraseña"}),e.jsx("div",{className:"text-sm text-center",children:e.jsx(f,{to:"/login",className:"text-(--color-terracotta-suave) hover:underline",children:"Volver a iniciar sesión"})})]})]})})]})})})};export{C as default};
