const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DDd0kLwX.js","assets/radix-pxeQr2vL.js","assets/react-9ItUixmA.js","assets/supabase-D999gSRu.js","assets/shadcn_misc-DPVfRoQl.js","assets/index-gfM2UXY3.css"])))=>i.map(i=>d[i]);
import{_ as h}from"./supabase-D999gSRu.js";import{j as e}from"./radix-pxeQr2vL.js";import{L as a}from"./react-9ItUixmA.js";import{u as p,I as s,C as l,b as o,B as g}from"./index-DDd0kLwX.js";import"./shadcn_misc-DPVfRoQl.js";const v=()=>{const{user:t}=p(),m=async()=>{if(confirm("¿Eliminar tu cuenta? Esta acción es irreversible."))try{const{supabase:c}=await h(async()=>{const{supabase:r}=await import("./index-DDd0kLwX.js").then(i=>i.e);return{supabase:r}},__vite__mapDeps([0,1,2,3,4,5])),n=(await c.auth.getSession()).data.session?.access_token,d="https://jdmexfawmetmfabpwlfs.supabase.co";if(d&&n){const r=new URL(d).host.split(".")[0],i=await fetch(`https://${r}.functions.supabase.co/self-account`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`}}),x=await i.json();if(!i.ok)throw new Error(x?.error||"No se pudo eliminar");window.toast?.success("Cuenta eliminada",{action:"delete"}),await c.auth.signOut(),window.location.href="/"}}catch(c){window.toast?.error(c?.message||"No se pudo eliminar la cuenta",{action:"delete"})}};return e.jsxs("div",{className:"container py-8",children:[e.jsxs("h1",{className:"heading-lg mb-6 flex items-center gap-3",children:[e.jsx(s,{category:"Usuario",name:"IconamoonProfileFill",className:"w-8 h-8"}),"Mi perfil"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(l,{className:"lg:col-span-2",children:e.jsxs(o,{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(s,{category:"Usuario",name:"IconamoonProfileFill",className:"w-5 h-5"}),"Información de la cuenta"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-gray-500 flex items-center gap-1",children:[e.jsx(s,{category:"Usuario",name:"IconamoonProfileFill",className:"w-3 h-3"}),"Nombre"]}),e.jsx("div",{className:"font-medium",children:t?.nombre||"—"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-gray-500 flex items-center gap-1",children:[e.jsx(s,{category:"Autenticacion",name:"MdiMail",className:"w-3 h-3"}),"Correo"]}),e.jsx("div",{className:"font-medium",children:t?.email||"—"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-gray-500 flex items-center gap-1",children:[e.jsx(s,{category:"Usuario",name:"MaterialSymbolsShieldLocked",className:"w-3 h-3"}),"Rol"]}),e.jsx("div",{className:"font-medium capitalize",children:t?.role})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(a,{to:"/mis-pedidos",className:"select-card p-5 block",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-gray-100 rounded-md",children:e.jsx(s,{category:"Pedidos",name:"MaterialSymbolsOrdersOutlineRounded",className:"w-6 h-6",alt:""})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Mis pedidos"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Revisa el estado de tus compras y descarga recibos."})]})]})}),e.jsx(a,{to:"/mis-calificaciones",className:"select-card p-5 block",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-gray-100 rounded-md",children:e.jsx(s,{category:"Catálogo y producto",name:"LucideHeart",className:"w-6 h-6",alt:""})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Mis calificaciones"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Califica tus compras y revisa opiniones anteriores."})]})]})}),e.jsx(a,{to:"/perfil/perfiles",className:"select-card p-5 block md:col-span-2",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-gray-100 rounded-md",children:e.jsx(s,{category:"Usuario",name:"RivetIconsSettings",className:"w-6 h-6",alt:""})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Perfiles de pago y envío"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Gestiona tus direcciones y métodos de pago guardados."})]})]})})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsxs("h2",{className:"font-semibold mb-2 flex items-center gap-2",children:[e.jsx(s,{category:"Usuario",name:"MdiShieldOff",className:"w-5 h-5"}),"Privacidad"]}),e.jsxs("button",{className:"btn btn-danger flex items-center gap-2",onClick:m,children:[e.jsx(s,{category:"Estados y Feedback",name:"BxErrorCircle",className:"w-4 h-4"}),"Eliminar mi cuenta"]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(l,{children:e.jsxs(o,{className:"p-6 space-y-3",children:[e.jsxs("h2",{className:"font-semibold flex items-center gap-2",children:[e.jsx(s,{category:"Navegación principal",name:"MdiGrid",className:"w-5 h-5"}),"Accesos rápidos"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs(a,{to:"/carrito",className:"btn btn-outline text-center flex items-center justify-center gap-2",children:[e.jsx(s,{category:"Carrito y checkout",name:"WhhShoppingcart",className:"w-4 h-4"}),"Ver carrito"]}),e.jsxs(a,{to:"/checkout",className:"btn btn-outline text-center flex items-center justify-center gap-2",children:[e.jsx(s,{category:"Carrito y checkout",name:"StreamlinePlumpPaymentRecieve7Solid",className:"w-4 h-4"}),"Ir a pagar"]})]})]})}),e.jsx(l,{children:e.jsxs(o,{className:"p-6 space-y-3",children:[e.jsxs("h2",{className:"font-semibold flex items-center gap-2",children:[e.jsx(s,{category:"Navegación principal",name:"MaterialSymbolsContactSupportRounded",className:"w-5 h-5"}),"Soporte"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"¿Necesitas ayuda con tu compra? Contáctanos."}),e.jsx(g,{asChild:!0,variant:"secondary",className:"flex items-center gap-2",children:e.jsxs("a",{href:"mailto:soporte@tesoroschoco.local",children:[e.jsx(s,{category:"Autenticacion",name:"MdiMail",className:"w-4 h-4"}),"Contactar soporte"]})})]})})]})]})]})};export{v as default};
