import{j as e}from"./radix-pxeQr2vL.js";import{b as a}from"./react-9ItUixmA.js";import{s as g}from"./index-DDd0kLwX.js";import{A as f}from"./AdminLayout-C4V03p12.js";import"./supabase-D999gSRu.js";import"./shadcn_misc-DPVfRoQl.js";const A=()=>{const[l,m]=a.useState([]),[h,u]=a.useState(!0),[c,b]=a.useState(""),[o,v]=a.useState("todos"),x=a.useMemo(()=>{const s=c.trim().toLowerCase();return l.filter(t=>{const r=!s||t.nombre.toLowerCase().includes(s)||(t.descripcion||"").toLowerCase().includes(s),n=o==="todos"||t.estado===o;return r&&n})},[l,c,o]),j=async()=>{u(!0);const{data:s,error:t}=await g.from("productos").select("id,nombre,descripcion,estado,imagen_url,created_at,vendedor_id").order("created_at",{ascending:!1});t&&console.error(t.message),m(s||[]),u(!1)};a.useEffect(()=>{j()},[]);const i=async(s,t)=>{const{error:r}=await g.from("productos").update({estado:t}).eq("id",s);if(r)return alert(r.message);m(n=>n.map(d=>d.id===s?{...d,estado:t}:d))};return e.jsxs(f,{title:"Moderación de Productos",subtitle:"Activa, desactiva o bloquea productos que infringen reglas",children:[e.jsx("div",{className:"mb-6 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{className:"input-hero max-w-md",placeholder:"Buscar por nombre o descripción...",value:c,onChange:s=>b(s.target.value)}),e.jsxs("select",{className:"form-select w-40",value:o,onChange:s=>v(s.target.value),children:[e.jsx("option",{value:"todos",children:"Todos"}),e.jsx("option",{value:"activo",children:"Activo"}),e.jsx("option",{value:"inactivo",children:"Inactivo"}),e.jsx("option",{value:"bloqueado",children:"Bloqueado"})]})]})}),e.jsx("div",{className:"card card-hover",children:e.jsx("div",{className:"card-body",children:h?e.jsx("p",{children:"Cargando..."}):x.length===0?e.jsx("p",{className:"text-gray-500",children:"Sin resultados"}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(s=>e.jsxs("div",{className:"card card-hover overflow-hidden",children:[s.imagen_url?e.jsx("img",{src:s.imagen_url,alt:s.nombre,className:"w-full h-40 object-cover"}):e.jsx("div",{className:"w-full h-40 bg-gray-100 flex items-center justify-center text-gray-400",children:"Sin imagen"}),e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:s.nombre}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:s.descripcion}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsx("span",{className:`badge ${s.estado==="activo"?"badge-success":s.estado==="inactivo"?"badge-secondary":"badge-danger"}`,children:s.estado}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{className:"btn btn-outline btn-sm",onClick:()=>i(s.id,"activo"),children:"Activar"}),e.jsx("button",{className:"btn btn-outline btn-sm",onClick:()=>i(s.id,"inactivo"),children:"Inactivar"}),e.jsx("button",{className:"btn btn-danger btn-sm",onClick:()=>i(s.id,"bloqueado"),children:"Bloquear"})]})]})]})]},s.id))})})})]})};export{A as default};
